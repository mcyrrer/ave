

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Structural Guidelines &mdash; AVE User&#39;s Guide  documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="AVE User&#39;s Guide  documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">AVE User&#39;s Guide  documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="structural-guidelines">
<h1>Structural Guidelines<a class="headerlink" href="#structural-guidelines" title="Permalink to this headline">¶</a></h1>
<p>All AVE packages follow a certain pattern for internal structure. This structure
is designed to meet a couple of goals:</p>
<blockquote>
<div><ul class="simple">
<li>The git tree is created in a way that enables enforcement of governance
rules (such as these).</li>
<li>The package can be tested &#8220;locally&#8221; without performing a system installation.
Used for development and debugging purposes.</li>
<li>The package can be acceptance tested against a system installation.</li>
<li>Source code, executables, OS integration files and documentation have
separate base directories. The root directory contains no such material.</li>
<li>The module can create its own Debian package in the most straight forward
way possible.</li>
<li>Documentation can be built with Sphinx by linking it into the build system
inside the ave/documentation git.</li>
</ul>
</div></blockquote>
<p>In the following sections, an imaginary package <tt class="docutils literal"><span class="pre">ave-washer</span></tt> is described. It
contains equipment support, system services, OS integration support and Python
modules. It also contains the support library <tt class="docutils literal"><span class="pre">libdetergent</span></tt> written in C.</p>
<div class="section" id="git-tree">
<h2>Git Tree<a class="headerlink" href="#git-tree" title="Permalink to this headline">¶</a></h2>
<p>When the git tree is requested on the SOMC CM web, its properties should follow
this pattern. Substitute &#8220;washer&#8221; for a real package name:</p>
<blockquote>
<div><ul class="simple">
<li><strong>Feature Name:</strong> &#8220;AVE Washer&#8221;</li>
<li><strong>Team Name:</strong> &#8220;AVE Governance Board&#8221;</li>
<li><strong>Repository List:</strong> &#8220;semctools/ave/washer&#8221;</li>
<li><strong>Initial Commit:</strong> Yes</li>
<li><strong>Verification:</strong> Restricted</li>
<li><strong>Verification Group:</strong> &#8220;SG-WW-AVE Committers-G&#8221;</li>
<li><strong>Decoupling:</strong> No</li>
</ul>
</div></blockquote>
<p>When the tree has been created, its root directory should be populated with the
following items (again, substitute &#8220;washer&#8221; for a real package name):</p>
<div class="highlight-python"><pre>.gitignore
.vcsjob
bin/
docs/
etc/
jobs/tests/
mkdeb
packaging/DEBIAN/
src/ave/washer/
src/libdetergent/</pre>
</div>
<p>Packages that do not need special OS integration, CLI tooling or native code can
skip one or more of the <tt class="docutils literal"><span class="pre">bin</span></tt>, <tt class="docutils literal"><span class="pre">etc</span></tt> and <tt class="docutils literal"><span class="pre">src/lib*</span></tt> directories. The
rest are mandatory and must be given proper content.</p>
</div>
<div class="section" id="gitignore">
<h2><tt class="docutils literal"><span class="pre">.gitignore</span></tt><a class="headerlink" href="#gitignore" title="Permalink to this headline">¶</a></h2>
<p>The file <tt class="docutils literal"><span class="pre">.gitignore</span></tt> should contain at least the following lines:</p>
<div class="highlight-python"><pre>*~
packaging/etc
packaging/usr
*.pyc
*.deb</pre>
</div>
<p>This causes git to skip editor temp files, Python byte code, the generated
Debian package and staging files generated during the Debian package creation.
Add rules as necessary to skip artifacts from the native build steps for support
libraries.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">AVE packages do not ship settings files for IDE&#8217;s. The <tt class="docutils literal"><span class="pre">.vcsjob</span></tt>
file should contain rules to skip such files if they cannot easily be kept
in a different location (e.g. under the user&#8217;s home directory).</p>
</div>
</div>
<div class="section" id="vcsjob">
<h2><tt class="docutils literal"><span class="pre">.vcsjob</span></tt><a class="headerlink" href="#vcsjob" title="Permalink to this headline">¶</a></h2>
<p>The file <tt class="docutils literal"><span class="pre">.vcsjob</span></tt> should contain references to executable files found in the
<tt class="docutils literal"><span class="pre">jobs/</span></tt> directory. Acceptance tests must be tagged <tt class="docutils literal"><span class="pre">&quot;ACCEPTANCE&quot;</span></tt>. Other
tags should be written in lower case. Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
  <span class="s">&quot;executables&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s">&quot;path&quot;</span><span class="p">:</span> <span class="s">&quot;jobs/washer_accept&quot;</span><span class="p">,</span>    <span class="s">&quot;tags&quot;</span><span class="p">:[</span><span class="s">&quot;washer&quot;</span><span class="p">,</span> <span class="s">&quot;ACCEPTANCE&quot;</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">&quot;path&quot;</span><span class="p">:</span> <span class="s">&quot;jobs/detergent_accept&quot;</span><span class="p">,</span> <span class="s">&quot;tags&quot;</span><span class="p">:[</span><span class="s">&quot;detergent&quot;</span><span class="p">,</span> <span class="s">&quot;ACCEPTANCE&quot;</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s">&quot;path&quot;</span><span class="p">:</span> <span class="s">&quot;jobs/debug_something&quot;</span><span class="p">,</span>  <span class="s">&quot;tags&quot;</span><span class="p">:[</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">,</span> <span class="s">&quot;debug&quot;</span><span class="p">]</span> <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="bin">
<h2><tt class="docutils literal"><span class="pre">bin/</span></tt><a class="headerlink" href="#bin" title="Permalink to this headline">¶</a></h2>
<p>Put executable code in this directory. Typically these are CLI tools that go
with the package and are used by lab owners to manage the lab. The directory
may also contain external dependencies that are not found in the Ubuntu Linux
repository. E.g. <tt class="docutils literal"><span class="pre">ave-handset</span></tt> needs the Android development tool <tt class="docutils literal"><span class="pre">aapt</span></tt>
which is not available through <tt class="docutils literal"><span class="pre">apt-get</span></tt>.</p>
<p>Homegrown tools written in Python should be as small as possible and import as
much functionality as possible from the package. For the washer example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#! /usr/bin/python2</span>

<span class="kn">import</span> <span class="nn">ave.washer</span>

<span class="c"># do command line option parsing, then call functions in the ave.washer</span>
<span class="c"># package.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The version of the Python interpreter is important. The hashbang in
all AVE Python executables must specify the version 2 series to avoid
accidental use of Python 3.</p>
</div>
<p>The tool itself must be named after the package. If the package implements a
service (as in this example), the tool must accept at least four standard
arguments, one option, and be able to print a simple CLI syntax helper:</p>
<div class="highlight-python"><pre>Syntax: ave-washer &lt;action&gt; [options]

Actions:
    --help      Display this message
    --start     Start the washer
    --restart   Restart the washer
    --stop      Stop the washer

Options:
    --force     Combine with --start to ignore existing PID file</pre>
</div>
<p>The <tt class="docutils literal"><span class="pre">--force</span></tt> option is used for integration with Upstart and other
<tt class="docutils literal"><span class="pre">init</span></tt> systems.</p>
</div>
<div class="section" id="pid-and-log-files">
<h2>PID and Log Files<a class="headerlink" href="#pid-and-log-files" title="Permalink to this headline">¶</a></h2>
<p>Packages that implement services that can be started on the command line must
store PID and log files in world readable files under <tt class="docutils literal"><span class="pre">/var/tmp</span></tt>:</p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">/var/tmp/ave-washer.pid</span></tt>: Content must be parsable with this Python code:</dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">with</span> <span class="pre">open('/var/tmp/ave-washer.pid')</span> <span class="pre">as</span> <span class="pre">f:</span> <span class="pre">pid</span> <span class="pre">=</span> <span class="pre">int(f.read())</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">/var/tmp/ave-washer.log</span></tt>: Plain text logs produced by the service. The</dt>
<dd><p class="first last">content does <em>not</em> have to be easy to parse. (Use Panotti for structured
logging.)</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="etc">
<h2><tt class="docutils literal"><span class="pre">etc/</span></tt><a class="headerlink" href="#etc" title="Permalink to this headline">¶</a></h2>
<p>Some OS integration files go here. The package is not allowed to store its own
configuration files under <tt class="docutils literal"><span class="pre">/etc</span></tt> on the host (use <tt class="docutils literal"><span class="pre">.ave/config</span></tt> for that)
but may need to ship files that are read by Upstart or udev:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">etc/init/ave-washer.conf</span></tt>: Config file for Upstart integration.</li>
<li><tt class="docutils literal"><span class="pre">etc/udev/rules.d/10-washer.rules</span></tt>: Config file for udev handling.</li>
</ul>
</div></blockquote>
<p>The Upstart configuration should look like this unless there are special
circumstances that require different handling:</p>
<div class="highlight-python"><pre>description "ave-washer"

start on (filesystem and net-device-up IFACE!=lo)

console output
expect daemon

exec /usr/bin/ave-washer --start --force</pre>
</div>
<p>The udev configuration should at least set permissions so that the user
does not need special privileges to open device nodes. These examples are taken
from Android and the Devantech relay.</p>
<p>Tell udev that USB equipment with vendor ID 0bb4 can be read and written
to by anyone:</p>
<div class="highlight-python"><pre>SUBSYSTEM=="usb", ATTR{idVendor}=="0bb4", MODE="0666"</pre>
</div>
<p>Tell udev that 8 virtual serial ports are world readable and writable:</p>
<div class="highlight-python"><pre>KERNEL=="ttyACM[0-7]*" MODE="0666"</pre>
</div>
</div>
<div class="section" id="jobs">
<h2><tt class="docutils literal"><span class="pre">jobs/</span></tt><a class="headerlink" href="#jobs" title="Permalink to this headline">¶</a></h2>
<p>This directory must contain all executables referenced from <tt class="docutils literal"><span class="pre">.vcsjob</span></tt>. It must
also contain <tt class="docutils literal"><span class="pre">runners.py</span></tt> that imports test cases found in <tt class="docutils literal"><span class="pre">jobs/tests</span></tt>.</p>
<p>A test job that supports development and debugging should normally follow the
pattern below. The example causes python to prefer the source code found in the
git over the source code found in the system installation. It then runs the
tests against the Washer&#8217;s configuration handling:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#! /usr/bin/python2</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">)))</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">&#39;src&#39;</span><span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>

    <span class="kn">import</span> <span class="nn">runners</span>
    <span class="n">runners</span><span class="o">.</span><span class="n">all_config</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">report</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is important to perform path manipulation before importing the
<tt class="docutils literal"><span class="pre">runners</span></tt> module. A bug in Python makes path manipulation unreliable
within the module that performed the path manipulation. Always perform path
manipulation before importing a module that relies on manipulated paths
(like in this example).</p>
</div>
<p>A test job that implements acceptance tests must use the system installation of
the package:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#! /usr/bin/python2</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">runners</span>
    <span class="n">runners</span><span class="o">.</span><span class="n">all_config</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">report</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">jobs/runners.py</span></tt> file should look something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Copyright (C) 2014 Sony Mobile Communications AB.</span>
<span class="c"># All rights, including trade secret rights, reserved.</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">traceback</span>
<span class="kn">import</span> <span class="nn">vcsjob</span>

<span class="kn">import</span> <span class="nn">tests.config</span>

<span class="k">def</span> <span class="nf">all_config</span><span class="p">(</span><span class="n">debug</span><span class="p">,</span> <span class="n">report</span><span class="p">):</span>
    <span class="n">args</span> <span class="o">=</span> <span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">run_suite</span><span class="p">([(</span><span class="n">tests</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">args</span><span class="p">)],</span> <span class="n">report</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="o">=</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">code</span> <span class="o">=</span> <span class="n">vcsjob</span><span class="o">.</span><span class="n">OK</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">code</span> <span class="o">=</span> <span class="n">vcsjob</span><span class="o">.</span><span class="n">FAILURES</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">vcsjob</span><span class="o">.</span><span class="n">ERRORS</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">run_suite</span></tt> function is boiler plate code that can be found in e.g. the
<tt class="docutils literal"><span class="pre">ave/workspace</span></tt> git.</p>
</div>
<div class="section" id="jobs-tests">
<h2><tt class="docutils literal"><span class="pre">jobs/tests/</span></tt><a class="headerlink" href="#jobs-tests" title="Permalink to this headline">¶</a></h2>
<p>This directory must contain all test cases for the package. For a package that
implements a service, the tests should at a minimum cover</p>
<blockquote>
<div><ul class="simple">
<li>Configuration</li>
<li>Service start/stop/restart</li>
<li>Broker integration (if the module implements an equipment class)</li>
<li>Functional tests against user exposed API&#8217;s</li>
<li>Lister tests (if the module implements an equipment lister)</li>
</ul>
</div></blockquote>
<p>Tests against command line tools found under <tt class="docutils literal"><span class="pre">bin/</span></tt> are not needed if that
code has been minimized properly so that API tests are sufficient.</p>
<p>Test cases must print the full path of the file they are implemented in together
with the name of the test case. The full path combined with the test name is
called the &#8220;pretty&#8221; identity in all AVE self tests:</p>
<div class="highlight-python"><pre>/home/CORPUSERS/23060224/ave/washer/jobs/tests/config.py t01
/home/CORPUSERS/23060224/ave/washer/jobs/tests/config.py t02
/home/CORPUSERS/23060224/ave/washer/jobs/tests/config.py t03
/home/CORPUSERS/23060224/ave/washer/jobs/tests/config.py t04
                                                         ...</pre>
</div>
<p>Failing tests must print <tt class="docutils literal"><span class="pre">pretty</span></tt> together with an explanation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">message</span> <span class="o">=</span> <span class="s">&#39;something fairly specific went wrong&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="s">&#39;FAIL </span><span class="si">%s</span><span class="s">: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pretty</span><span class="p">,</span> <span class="n">message</span><span class="p">))</span>
<span class="k">return</span> <span class="bp">False</span>
</pre></div>
</div>
<p>Test cases that pass should avoid printing any messages unless the execution is
so long that the test may otherwise appear to be stalled. Test cases that pass
must return <tt class="docutils literal"><span class="pre">True</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Test cases should be as short as possible and prefer various forms of
duplication between test cases over having fewer tests with less overhead.
It is important that the test&#8217;s source code is easy to follow. Test cases
provide example usage of AVE and should be thought of as documentation.</p>
</div>
</div>
<div class="section" id="packaging">
<h2><tt class="docutils literal"><span class="pre">packaging/</span></tt><a class="headerlink" href="#packaging" title="Permalink to this headline">¶</a></h2>
<p>The packagin directory is used as a staging are to create the package&#8217;s Debian
package. <tt class="docutils literal"><span class="pre">mkdeb</span></tt> will populate it with directory structures that match the
system installation. E.g. content created in <tt class="docutils literal"><span class="pre">packaging/usr</span></tt> will be installed
to <tt class="docutils literal"><span class="pre">/usr</span></tt> when the Debian package is installed.</p>
<p>This structure is chosen because it is required to make the OS tool <tt class="docutils literal"><span class="pre">dpkg-deb</span></tt>
handle package creation correctly. <tt class="docutils literal"><span class="pre">dpkg-deb</span></tt> takes a directory as argument
(the <tt class="docutils literal"><span class="pre">packaging/</span></tt> directory in all AVE packages) and expects to find the
subdirectory <tt class="docutils literal"><span class="pre">DEBIAN/</span></tt> with configuration files in it. All other content in
the directory will be copied into the Debian package by <tt class="docutils literal"><span class="pre">dpkg-deb</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure all content under <tt class="docutils literal"><span class="pre">packaging/</span></tt> <em>except</em> the
<tt class="docutils literal"><span class="pre">packaging/DEBIAN/</span></tt> directory and its contents are lister in
<tt class="docutils literal"><span class="pre">.gitignore</span></tt>.</p>
</div>
</div>
<div class="section" id="packaging-debian-control">
<h2><tt class="docutils literal"><span class="pre">packaging/DEBIAN/control</span></tt><a class="headerlink" href="#packaging-debian-control" title="Permalink to this headline">¶</a></h2>
<p>This file contains Debian configuration management meta data for the package.
The <tt class="docutils literal"><span class="pre">ave-washer</span></tt> package contains native code (<tt class="docutils literal"><span class="pre">Architecture:</span> <span class="pre">amd64</span></tt>) and
uses <tt class="docutils literal"><span class="pre">udev</span></tt> for device discovery. It also needs Python (because the package
is mostly implemented in Python) and <tt class="docutils literal"><span class="pre">ave-common</span></tt> (to be able to read from
<tt class="docutils literal"><span class="pre">.ave/config</span></tt>).</p>
<p>It should look something like this:</p>
<div class="highlight-python"><pre>Package:      ave-washer
Version:      1
Architecture: amd64
Depends:      udev (&gt;=151)
Pre-Depends:  python (&gt;=2.6.5), ave-common (&gt;=73)
Maintainer:   Klas Lindberg &lt;klas.lindberg@sonymobile.com&gt;
Description:  AVE support for the Washer equipment</pre>
</div>
<p>Packages without native code content should set <tt class="docutils literal"><span class="pre">Archtecture</span></tt> to <tt class="docutils literal"><span class="pre">all</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">Pre-Depends</span></tt> field forces <tt class="docutils literal"><span class="pre">apt-get</span></tt> and <tt class="docutils literal"><span class="pre">dpkg</span></tt> to
completely install such packages before attempting to install the current
package. This makes it possible for the current package to import e.g. the
AVE common modules in its <tt class="docutils literal"><span class="pre">postinst</span></tt> script. Without <tt class="docutils literal"><span class="pre">Pre-Depends</span></tt>
APT is allowed to install the dependencies <em>and</em> the current package in
parallel, which would cause the <tt class="docutils literal"><span class="pre">postinst</span></tt> script for the current package
to fail if it needs to import modules from the dependencies. Python itself
is pre-depended to let us write the <tt class="docutils literal"><span class="pre">postinst</span></tt> script in Python instead
of Sh.</p>
</div>
</div>
<div class="section" id="packaging-debian-postinst">
<h2><tt class="docutils literal"><span class="pre">packaging/DEBIAN/postinst</span></tt><a class="headerlink" href="#packaging-debian-postinst" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">dpkg</span></tt> executes <tt class="docutils literal"><span class="pre">postinst</span></tt> at the end of the installation of the package,
with some command line options to tell the script what is going on. This is
normally used to perform detailed configuration that would be difficult to do
in any other context. E.g. to set file permissions, add special entries to
system data bases and so on.</p>
<p>What is needed in the <tt class="docutils literal"><span class="pre">postinst</span></tt> script? Some guidelines:</p>
<blockquote>
<div><ul class="simple">
<li>Packages that simply contain new Python modules do not need a <tt class="docutils literal"><span class="pre">postinst</span></tt>
script at all.</li>
<li>Packages that contain services must typically restart those. Otherwise the
service continues to execute with the old content (already loaded in RAM by
Python).</li>
<li>Packages that contain native code content <em>may</em> choose to build this during
installation. This is not recommended but is necessary if the OS dependencies
are &#8220;too different&#8221; between different versions of Ubuntu. Dependencies are
&#8220;too different&#8221; if the package cannot be built one version of Ubuntu and then
used on the other. Fortunately this is rare.</li>
<li>Packages that contain kernel drivers must build these. Kernel drivers cannot
be built once and for all and then shipped in the package because the kernel
does not provide a stable internal API.</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Packages that depend on non-standard kernel drivers are no longer
accepted into the default AVE distribution due to the difficulties with
building the drivers during package installation. If you experiment with
equipment that needs such drivers, contact the AVE governance board for
assistance.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Packages that must build native code content during installation must
look for source code and build systems under <tt class="docutils literal"><span class="pre">/usr/share/ave/&lt;package&gt;</span></tt>,
and also add a pass in the package&#8217;s <tt class="docutils literal"><span class="pre">mkdeb</span></tt> to copy the needed material
to this location.</p>
</div>
<p>The <tt class="docutils literal"><span class="pre">ave-washer</span></tt> package implements a service but has no native code content
that must be built during installation. Its <tt class="docutils literal"><span class="pre">postinst</span></tt> would look like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#! /usr/bin/python2</span>

<span class="c"># Copyright (C) 2014 Sony Mobile Communications AB.</span>
<span class="c"># All rights, including trade secret rights, reserved.</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">errno</span>
<span class="kn">import</span> <span class="nn">shutil</span>

<span class="kn">import</span> <span class="nn">ave.cmd</span>

<span class="k">def</span> <span class="nf">is_running</span><span class="p">():</span>
    <span class="kn">from</span> <span class="nn">ave.washer.daemon</span> <span class="kn">import</span> <span class="n">PID_PATH</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">PID_PATH</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;configure&#39;</span><span class="p">]:</span>

            <span class="c"># start or restart the service</span>
            <span class="k">if</span> <span class="n">is_running</span><span class="p">():</span>
                <span class="n">ave</span><span class="o">.</span><span class="n">cmd</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s">&#39;/usr/bin/ave-washer --restart&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ave</span><span class="o">.</span><span class="n">cmd</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s">&#39;/usr/bin/ave-washer --start&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="mi">0</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</pre></div>
</div>
<p>To see an example of a most complicated package, download the
<tt class="docutils literal"><span class="pre">semctools/ave/quancom</span></tt> git tree.</p>
</div>
<div class="section" id="src-ave-init-py">
<h2><tt class="docutils literal"><span class="pre">src/ave/__init__.py</span></tt><a class="headerlink" href="#src-ave-init-py" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">src/ave/</span></tt> directory should contain a single <tt class="docutils literal"><span class="pre">__init__.py</span></tt> file with
specially crafted content. All other content should be stored in a subdirectory
called after the package. Here is the content of <tt class="docutils literal"><span class="pre">__init__.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">pkg_resources</span>
<span class="kn">import</span> <span class="nn">modulefinder</span>

<span class="c"># Copyright (C) 2014 Sony Mobile Communications AB.</span>
<span class="c"># All rights, including trade secret rights, reserved.</span>

<span class="n">pkg_resources</span><span class="o">.</span><span class="n">declare_namespace</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">__path__</span><span class="p">:</span>
     <span class="n">modulefinder</span><span class="o">.</span><span class="n">AddPackagePath</span><span class="p">(</span><span class="n">__name__</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure this file is <em>not</em> copied to the <tt class="docutils literal"><span class="pre">packaging/</span></tt> staging
area by <tt class="docutils literal"><span class="pre">mkdeb</span></tt>. It is only useful to have in the git tree.</p>
</div>
<p>What is going on here? The <tt class="docutils literal"><span class="pre">ave</span></tt> Python package is implemented in several
git trees that are installed to a common directory structure in <tt class="docutils literal"><span class="pre">/usr</span></tt>. At
runtime, as soon as the imported package <tt class="docutils literal"><span class="pre">ave.</span></tt> is found, Python will stop
looking for this name space in other locations. So all content has to be found
under <tt class="docutils literal"><span class="pre">/usr</span></tt>, or all content has to be found in the user&#8217;s local directory
structure. To be able to mix, Python has to be told to handle name spaces a bit
different: Add the locally declared namespace but with all known paths attached
so that not only the local path will be searched for <em>all</em> <tt class="docutils literal"><span class="pre">ave.</span></tt> content.</p>
<p>Consider again the &#8220;local&#8221; test jobs do for development and debugging purposes
from the <tt class="docutils literal"><span class="pre">jobs/</span></tt> section above:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">)))</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">&#39;src&#39;</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">runners</span>
<span class="n">runners</span><span class="o">.</span><span class="n">all_config</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">report</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<p>If the local <tt class="docutils literal"><span class="pre">src/ave/</span></tt> directory contains an ordinary (empty) <tt class="docutils literal"><span class="pre">__init__.py</span></tt>
file, then after <tt class="docutils literal"><span class="pre">sys.path.insert(0,</span> <span class="pre">path)</span></tt>, Python will no longer look for
content under <tt class="docutils literal"><span class="pre">/usr/lib/</span></tt> in the system installation. This makes it impossible
to import other AVE modules in the local test job.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Because all AVE packages follow this convention, a debugging test job
can import the source tree for any AVE package that the user has a local
copy of. Just add more calls to <tt class="docutils literal"><span class="pre">sys.path.insert()</span></tt> before importing the
<tt class="docutils literal"><span class="pre">runners</span></tt> module.</p>
</div>
</div>
<div class="section" id="src-ave-washer">
<h2><tt class="docutils literal"><span class="pre">src/ave/washer/</span></tt><a class="headerlink" href="#src-ave-washer" title="Permalink to this headline">¶</a></h2>
<p>This directory contains an empty <tt class="docutils literal"><span class="pre">__init__.py</span></tt> file and the implementation of
all <tt class="docutils literal"><span class="pre">ave.washer</span></tt> modules.</p>
</div>
<div class="section" id="src-libdetergent">
<h2><tt class="docutils literal"><span class="pre">src/libdetergent/</span></tt><a class="headerlink" href="#src-libdetergent" title="Permalink to this headline">¶</a></h2>
<p>Native code libraries should be buildable in isolation, using only a private
build system that can be called without changing the current working directory:</p>
<div class="highlight-python"><pre>make -C src/libdetergent clean
make -C src/libdetergent libdetergent.so</pre>
</div>
<p>The resulting object file must be callable by the Python <tt class="docutils literal"><span class="pre">ctypes</span></tt> module.
There are two choices for libraries that do not implement the C ABI of the host
platform:</p>
<blockquote>
<div><ul class="simple">
<li>Do not use it.</li>
<li>Write a tool that uses it and distribute it separately through SWEREPO. Then
set a Debian dependency from AVE to that package and use the <tt class="docutils literal"><span class="pre">ave.cmd</span></tt>
module to interface with the tool.</li>
</ul>
</div></blockquote>
<p>For instance, the second rule applies to re-use of most libraries written in
Java. There is no clean and simple way to call Java functions from Python. (The
library owner may of course make the extra effort to implement a C ABI through
JNI to make it callable from any C program, including Python.)</p>
<p>Use <tt class="docutils literal"><span class="pre">gmake</span></tt> as build system for native code libraries if you have a choice.
The build system must not use OS features that require the use of <tt class="docutils literal"><span class="pre">sudo</span></tt>.</p>
<p>Let&#8217;s assume that <tt class="docutils literal"><span class="pre">libdetergent</span></tt> implements a single function with the
following C prototype:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cm">/* mix an array with &#39;size&#39; integers and log a message */</span>
<span class="kt">int</span> <span class="n">detergent_mix</span><span class="p">(</span><span class="kt">int</span> <span class="n">size</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span> <span class="n">array</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">message</span><span class="p">);</span>
</pre></div>
</div>
<p>To call this from <tt class="docutils literal"><span class="pre">ave.washer.detergent</span></tt>, use <tt class="docutils literal"><span class="pre">ctypes</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Copyright (C) 2014 Sony Mobile Communications AB.</span>
<span class="c"># All rights, including trade secret rights, reserved.</span>

<span class="kn">from</span> <span class="nn">ctypes</span> <span class="kn">import</span> <span class="o">*</span> <span class="c"># CDLL(), c_int, c_char_p, POINTER(), etc</span>

<span class="k">class</span> <span class="nc">Detergent</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">c_library</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">so_path</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="c"># default to the system installation unless the caller selected</span>
        <span class="c"># another version (used from test jobs for the Detergent class).</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">so_path</span><span class="p">:</span>
            <span class="n">so_path</span> <span class="o">=</span> <span class="s">&#39;libdetergent.so&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c_library</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_so</span><span class="p">(</span><span class="n">so_path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">load_so</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">so_path</span><span class="p">):</span>
        <span class="n">c_library</span> <span class="o">=</span> <span class="n">CDLL</span><span class="p">(</span><span class="n">so_path</span><span class="p">,</span> <span class="n">use_errno</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="c"># declare the function prototype of mix() so that Python can take</span>
        <span class="c"># care of most of the value conversions for us.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mix</span>             <span class="o">=</span> <span class="n">c_library</span><span class="o">.</span><span class="n">detergent_mix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mix</span><span class="o">.</span><span class="n">argtypes</span>    <span class="o">=</span> <span class="p">[</span><span class="n">c_int</span><span class="p">,</span> <span class="n">POINTER</span><span class="p">(</span><span class="n">c_int</span><span class="p">),</span> <span class="n">c_char_p</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mix</span><span class="o">.</span><span class="n">restype</span>     <span class="o">=</span> <span class="n">c_int</span>
        <span class="k">return</span> <span class="n">c_library</span>

    <span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">integers</span><span class="o">*</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="n">Cls</span> <span class="o">=</span> <span class="n">c_int</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">integers</span><span class="p">)</span> <span class="c"># create a class for the integer array</span>
        <span class="n">buf</span> <span class="o">=</span> <span class="n">Cls</span><span class="p">(</span><span class="o">*</span><span class="n">integers</span><span class="p">)</span>        <span class="c"># create a C compatible array</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mix</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">integers</span><span class="p">),</span> <span class="n">buf</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;could not mix: </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">get_errno</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="mkdeb">
<h2><tt class="docutils literal"><span class="pre">mkdeb</span></tt><a class="headerlink" href="#mkdeb" title="Permalink to this headline">¶</a></h2>
<p>The job of <tt class="docutils literal"><span class="pre">mkdeb</span></tt> is to collect material for inclusion in a Debian package
that makes the AVE module installable. Each AVE package is a bit different but
most implement at least some of the following steps:</p>
<blockquote>
<div><ul class="simple">
<li>Clean out old staging material in <tt class="docutils literal"><span class="pre">packaging/</span></tt>.</li>
<li>Copy Upstart integration files to <tt class="docutils literal"><span class="pre">packaging/etc/init/</span></tt>.</li>
<li>Copy udev rules to <tt class="docutils literal"><span class="pre">packaging/etc/udev/rules.d/</span></tt>.</li>
<li>Copy executables to <tt class="docutils literal"><span class="pre">packaging/usr/bin/</span></tt>.</li>
<li>Copy Python modules to <tt class="docutils literal"><span class="pre">packaging/usr/lib/pymodules/python2.6/ave/</span></tt></li>
<li>Copy Python modules to <tt class="docutils literal"><span class="pre">packaging/usr/lib/pymodules/python2.7/ave/</span></tt></li>
<li>Build native code libraries.</li>
<li>Copy native code libraries to <tt class="docutils literal"><span class="pre">packaging/usr/lib/</span></tt>.</li>
<li>Copy sources for kernel drivers to <tt class="docutils literal"><span class="pre">packaging/usr/share/ave/</span></tt>.</li>
<li>Extract the package version from <tt class="docutils literal"><span class="pre">packaging/DEBIAN/control</span></tt>.</li>
<li>Generate the Debian package and name it after the AVE package and the version
number.</li>
</ul>
</div></blockquote>
<p>Because this all this is just boiler plate code that can be found in any AVE git
tree, no full example is given here. The <tt class="docutils literal"><span class="pre">semctools/ave/quancom</span></tt> git uses all
of the steps.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">mkdeb</span></tt> must take care to replace the &#8220;specially crafted&#8221;
<tt class="docutils literal"><span class="pre">__init__.py</span></tt> files with empty ones. See <tt class="docutils literal"><span class="pre">src/ave/__init__.py</span></tt> above.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Unlike all other Python code in AVE, the <tt class="docutils literal"><span class="pre">mkdeb</span></tt> scripts are not
allowed to import AVE modules. (One should not have to install AVE to be
able to build it&#8217;s Debian packages.) Because of this, <tt class="docutils literal"><span class="pre">mkdeb</span></tt> executes
external programs with <tt class="docutils literal"><span class="pre">subprocess.Popen()</span></tt> instead of <tt class="docutils literal"><span class="pre">ave.cmd.run()</span></tt>.</p>
</div>
</div>
<div class="section" id="docs">
<h2><tt class="docutils literal"><span class="pre">docs/</span></tt><a class="headerlink" href="#docs" title="Permalink to this headline">¶</a></h2>
<p>The contents of this directory is not included in the Debian package. Instead
it is made to integrate with the User&#8217;s Guide project in the
<tt class="docutils literal"><span class="pre">semctools/ave/documentation</span></tt> git. The guide is published separately on
<a class="reference external" href="http://ave.sonyericsson.net">http://ave.sonyericsson.net</a>.</p>
<p>Documentation is written in reStructuredText (<a class="reference external" href="http://sphinx-doc.org/rest.html">http://sphinx-doc.org/rest.html</a>).
AVE packages must at least contain an API guide for users of AVE. Preferably it
should also include a technical overview and some examples of correct usage.</p>
<p>Although it is possible to extract Python documentation strings from souce code,
it is recommended to <em>not</em> do so. Automatically generated API documentation has
a number of drawbacks:</p>
<blockquote>
<div><ul class="simple">
<li>It is not possible to mix discussion with strict API documentation.</li>
<li>Decorators used on the API &#8220;take over&#8221; the generated document.</li>
<li>The writer cannot hide function parameters that users should not use.</li>
<li>The writer has no control over the layout. Functions will be sorted after
their names instead of what may be best from a presentation standpoint.</li>
</ul>
</div></blockquote>
<p>Instead the writer should put all API documentation in <tt class="docutils literal"><span class="pre">docs/api.rst</span></tt> (or a
collection of files if the material is big enough to warrant a split). To build
the documentation, follow these steps:</p>
<blockquote>
<div><ul>
<li><p class="first">Download the <tt class="docutils literal"><span class="pre">semctools/ave/documentation</span></tt> git so that <tt class="docutils literal"><span class="pre">documentation</span></tt>
and <tt class="docutils literal"><span class="pre">washer</span></tt> are found in the same directory.</p>
</li>
<li><p class="first">Create a symbolic link from <tt class="docutils literal"><span class="pre">documentation/users_guide/washer</span></tt> to
<tt class="docutils literal"><span class="pre">../../washer</span></tt>.</p>
</li>
<li><p class="first">Edit the <tt class="docutils literal"><span class="pre">html</span></tt> target of <tt class="docutils literal"><span class="pre">documentation/users_guide/Makefile</span></tt> to target
<tt class="docutils literal"><span class="pre">washer</span></tt>. E.g:</p>
<blockquote>
<div><div class="highlight-make"><div class="highlight"><pre><span class="nf">html</span><span class="o">:</span>
        sphinx-apidoc -f -o <span class="nb">source </span>washer
        <span class="k">$(</span>SPHINXBUILD<span class="k">)</span> -b html <span class="k">$(</span>ALLSPHINXOPTS<span class="k">)</span> <span class="k">$(</span>BUILDDIR<span class="k">)</span>/html
        @echo
        @echo <span class="s2">&quot;Build finished. The HTML pages are in $(BUILDDIR)/html.&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Edit <tt class="docutils literal"><span class="pre">documentation/users_guide/index.rst</span></tt>: Include <tt class="docutils literal"><span class="pre">washer/docs/api.rst</span></tt>
in the Contents listing.</p>
</li>
<li><p class="first">Build: <tt class="docutils literal"><span class="pre">make</span> <span class="pre">-C</span> <span class="pre">documentation/users_guide</span> <span class="pre">html</span></tt>.</p>
</li>
<li><p class="first">Open <tt class="docutils literal"><span class="pre">documentation/users_guide/_build/html/index.html</span></tt> in a web browser
and check that the new material is included and looks alright.</p>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Consider it a <strong>TODO</strong> item to improve on the user&#8217;s guide build
system to require fewer of the steps listed above.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Structural Guidelines</a><ul>
<li><a class="reference internal" href="#git-tree">Git Tree</a></li>
<li><a class="reference internal" href="#gitignore"><tt class="docutils literal"><span class="pre">.gitignore</span></tt></a></li>
<li><a class="reference internal" href="#vcsjob"><tt class="docutils literal"><span class="pre">.vcsjob</span></tt></a></li>
<li><a class="reference internal" href="#bin"><tt class="docutils literal"><span class="pre">bin/</span></tt></a></li>
<li><a class="reference internal" href="#pid-and-log-files">PID and Log Files</a></li>
<li><a class="reference internal" href="#etc"><tt class="docutils literal"><span class="pre">etc/</span></tt></a></li>
<li><a class="reference internal" href="#jobs"><tt class="docutils literal"><span class="pre">jobs/</span></tt></a></li>
<li><a class="reference internal" href="#jobs-tests"><tt class="docutils literal"><span class="pre">jobs/tests/</span></tt></a></li>
<li><a class="reference internal" href="#packaging"><tt class="docutils literal"><span class="pre">packaging/</span></tt></a></li>
<li><a class="reference internal" href="#packaging-debian-control"><tt class="docutils literal"><span class="pre">packaging/DEBIAN/control</span></tt></a></li>
<li><a class="reference internal" href="#packaging-debian-postinst"><tt class="docutils literal"><span class="pre">packaging/DEBIAN/postinst</span></tt></a></li>
<li><a class="reference internal" href="#src-ave-init-py"><tt class="docutils literal"><span class="pre">src/ave/__init__.py</span></tt></a></li>
<li><a class="reference internal" href="#src-ave-washer"><tt class="docutils literal"><span class="pre">src/ave/washer/</span></tt></a></li>
<li><a class="reference internal" href="#src-libdetergent"><tt class="docutils literal"><span class="pre">src/libdetergent/</span></tt></a></li>
<li><a class="reference internal" href="#mkdeb"><tt class="docutils literal"><span class="pre">mkdeb</span></tt></a></li>
<li><a class="reference internal" href="#docs"><tt class="docutils literal"><span class="pre">docs/</span></tt></a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/governance/structure_guidelines.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">AVE User&#39;s Guide  documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013-2014, Sony Mobile Communications Inc..
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>